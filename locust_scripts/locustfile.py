from locust import HttpLocust, TaskSet, task
import random

url_sets = {
    "bias_4": [
        "/4/4-4-4-4/6",
        "/4/4/130",
        "/4/2/110",
        "/4/2/228",
        "/2/4-4-2-3-4/103",
        "/4/4-4-2/41",
        "/4/3-4/154",
        "/3/4-4-3/163",
        "/2/3-4-4-4-3/154",
        "/2/3-4/232",
        "/4/3/65",
        "/2/4-4-2-3-4/222",
        "/2/2/57",
        "/4/4-3/76",
        "/4/4-3-2-4-4/139",
        "/3/4/3",
        "/2/4-3-4-2-4/12",
        "/2/4-3-4/76",
        "/4/4-4/214",
        "/4/4-3-4-4/149",
    ],
    "bias_3": [
        "/3/3/19",
        "/4/3-3-2-3/242",
        "/3/3-4/166",
        "/3/3-3-3/238",
        "/2/3-3-2-2-4/116",
        "/2/3-3-3-3/125",
        "/2/4-4-3/147",
        "/4/3/188",
        "/3/3-3-3-4/9",
        "/3/3-2/82",
        "/4/3-3-3-3-3/181",
        "/3/3-4/115",
        "/4/4-3-3/238",
        "/3/3/180",
        "/4/3-3-3-3-4/16",
        "/3/3-3/110",
        "/2/4/23",
        "/3/3-3-3-3-3/101",
        "/3/4-2-2/38",
        "/4/2-3-3-4/64",
    ],
    "bias_2": [
        "/2/3-2-2-3-2/9",
        "/4/2/229",
        "/2/3-3-2/245",
        "/2/4-4-4-2-3/49",
        "/4/2-4/147",
        "/4/2-2-4-4/145",
        "/2/3-2-4-4/40",
        "/4/4-4-4/102",
        "/2/3-2-3/93",
        "/2/2-2-4/199",
        "/3/3-2-2/77",
        "/4/2-4-2-2/75",
        "/2/3-4/105",
        "/3/4-2-2/96",
        "/2/4-3-2-2-2/85",
        "/2/2-2-2-3-2/197",
        "/4/2-4/79",
        "/3/2-3-2-2/204",
        "/2/3-4-2-3/152",
        "/2/2/119",
    ],
    "bias_2_3": [
        "/2/3-4/76",
        "/3/3-2-2-2/137",
        "/2/3-2-3-4-2/94",
        "/2/4-2-2-3-2/204",
        "/2/3-3-2-3/126",
        "/3/2-4-3-3/13",
        "/3/2-3-4/201",
        "/2/3-3-3-3/84",
        "/2/3/6",
        "/2/3-3-3/181",
        "/3/4-3-3/93",
        "/3/2-2-3/49",
        "/3/2-3-2-2/212",
        "/3/3-2-2-2-2/197",
        "/2/2-2/95",
        "/2/4-3/65",
        "/2/2-3/104",
        "/3/2/158",
        "/3/3-4/230",
        "/4/2-3/65",
    ],
    "bias_2_4": [
        "/2/4-4-2-2/223",
        "/3/2-3-2-3-3/93",
        "/3/4-4/195",
        "/3/4-4-4-4/217",
        "/3/4-4-3-4/66",
        "/2/4-2-4/235",
        "/4/2-4-3/155",
        "/4/4/71",
        "/4/3-2-4/33",
        "/2/3/188",
        "/2/4-4-2-4/104",
        "/4/4-2-4-3-2/45",
        "/4/4/79",
        "/2/3-3/87",
        "/2/2/247",
        "/4/2/88",
        "/2/3-4-3/155",
        "/2/2-3-2-2-3/104",
        "/2/4-3-2-2-2/105",
        "/3/4-2-2-4-4/26",
    ],
    "bias_3_4": [
        "/4/2/213",
        "/3/4/71",
        "/3/3/47",
        "/3/3-4/37",
        "/4/4/223",
        "/3/4-4-2-4-4/215",
        "/3/4-4/192",
        "/2/3-3/91",
        "/4/3/171",
        "/4/4-3-4/142",
        "/3/4-4-3/60",
        "/4/4/231",
        "/3/4-4-4-4-2/37",
        "/4/3-4-4-4-3/183",
        "/3/2-3-4-4/11",
        "/3/3-4-4-4-4/215",
        "/3/3/139",
        "/3/4-2/223",
        "/3/3/14",
        "/4/3-4-3-4/122",
    ],
    "bias_2_3_4": [
        "/4/2-4/170",
        "/2/4-2-4-2/65",
        "/4/4-3-3-4/229",
        "/3/2-3-3-2/107",
        "/4/4/106",
        "/4/4-3/224",
        "/2/2/130",
        "/2/2-2/6",
        "/4/3-4-3/96",
        "/3/3-3-3-4-4/14",
        "/2/2-2-2-4-4/72",
        "/3/4-4-4/139",
        "/4/4-4/69",
        "/3/3-3-2-2/115",
        "/4/3/169",
        "/3/4-3/42",
        "/2/2-2-3-2/126",
        "/3/4-2-3-4/56",
        "/4/3-4-4-3/216",
        "/4/4-4-3-4/16",
    ],
}


class UserBehavior(TaskSet):
    @task(1)
    def bias_2(self):
        self.client.get(
            url_sets["bias_2"][
                random.randint(
                    1, (len(url_sets["bias_2"]) - 1)
                )
            ]
        )

    @task(1)
    def bias_3(self):
        self.client.get(
            url_sets["bias_3"][
                random.randint(
                    5, (len(url_sets["bias_3"]) - 1)
                )
            ]
        )

    @task(1)
    def bias_4(self):
        self.client.get(
            url_sets["bias_4"][
                random.randint(
                    1, (len(url_sets["bias_4"]) - 1)
                )
            ]
        )

    @task(1)
    def bias_2_3(self):
        self.client.get(
            url_sets["bias_2_3"][
                random.randint(
                    1, (len(url_sets["bias_2_3"]) - 1)
                )
            ]
        )

    @task(1)
    def bias_2_4(self):
        self.client.get(
            url_sets["bias_2_4"][
                random.randint(
                    1, (len(url_sets["bias_2_4"]) - 1)
                )
            ]
        )

    @task(4)
    def bias_3_4(self):
        self.client.get(
            url_sets["bias_3_4"][
                random.randint(
                    1, (len(url_sets["bias_3_4"]) - 1)
                )
            ]
        )

    @task(1)
    def bias_2_3_4(self):
        self.client.get(
            url_sets["bias_2_3_4"][
                random.randint(
                    1, (len(url_sets["bias_2_3_4"]) - 1)
                )
            ]
        )


class WebsiteUser(HttpLocust):
    task_set = UserBehavior
    wait_function = (
        lambda self: random.expovariate(1) * 4000
    )
